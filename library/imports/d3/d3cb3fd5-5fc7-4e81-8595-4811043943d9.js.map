{"version":3,"sources":["../../../assets/assets/RainFelt.js"],"names":["RainMaterial","require","cc","Class","extends","Component","properties","target","Sprite","onLoad","dynamicAtlasManager","enabled","_material","start","_start","Date","now","texture","spriteFrame","getTexture","setTexture","setResolution","node","width","height","updateHash","_renderData","update","dt","time","setTime"],"mappings":";;;;;;AAAA,IAAMA,eAAeC,QAAQ,cAAR,CAArB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQL,GAAGM;AADH,KAHP;;AAOL;;AAEAC,UATK,oBASK;AACNP,WAAGQ,mBAAH,CAAuBC,OAAvB,GAAiC,KAAjC;AACA,aAAKC,SAAL,GAAiB,IAAIZ,YAAJ,EAAjB;AACH,KAZI;AAcLa,SAdK,mBAcI;AACL,aAAKC,MAAL,GAAcC,KAAKC,GAAL,EAAd;;AAEA,YAAI,KAAKT,MAAT,EAAiB;AACb,gBAAIU,UAAU,KAAKV,MAAL,CAAYW,WAAZ,CAAwBC,UAAxB,EAAd;AACA,iBAAKP,SAAL,CAAeQ,UAAf,CAA0BH,OAA1B;AACA,iBAAKL,SAAL,CAAeS,aAAf,CAA6B,KAAKd,MAAL,CAAYe,IAAZ,CAAiBC,KAA9C,EAAqD,KAAKhB,MAAL,CAAYe,IAAZ,CAAiBE,MAAtE;AACA,iBAAKZ,SAAL,CAAea,UAAf;AACA,iBAAKlB,MAAL,CAAYK,SAAZ,GAAwB,KAAKA,SAA7B;AACA,iBAAKL,MAAL,CAAYmB,WAAZ,CAAwBd,SAAxB,GAAoC,KAAKA,SAAzC;AACH;AACJ,KAzBI;AA2BLe,UA3BK,kBA2BGC,EA3BH,EA2BO;AACR,YAAIZ,MAAMD,KAAKC,GAAL,EAAV;AACA,YAAIa,OAAO,CAACb,MAAM,KAAKF,MAAZ,IAAsB,IAAjC;AACA,aAAKF,SAAL,CAAekB,OAAf,CAAuBD,IAAvB;AACH;AA/BI,CAAT","file":"RainFelt.js","sourceRoot":"../../../assets","sourcesContent":["const RainMaterial = require('RainMaterial');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        target: cc.Sprite\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.dynamicAtlasManager.enabled = false;\n        this._material = new RainMaterial();\n    },\n\n    start () {\n        this._start = Date.now();\n\n        if (this.target) {\n            let texture = this.target.spriteFrame.getTexture();\n            this._material.setTexture(texture);\n            this._material.setResolution(this.target.node.width, this.target.node.height);\n            this._material.updateHash();\n            this.target._material = this._material;\n            this.target._renderData._material = this._material;\n        }\n    },\n\n    update (dt) {\n        let now = Date.now();\n        let time = (now - this._start) / 1000;\n        this._material.setTime(time);\n    },\n});\n"]}